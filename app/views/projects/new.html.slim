sass:
	$green-one: #00B22D
	$blue-one: #3F4752
	$blue-two: #79808B
	.container
		width: 100% !important
		margin: 0 !important
		padding: 0 !important
	#project_form
		.fieldset
			.panel
				text-align: center
				.inputs
					text-align: left
					margin: 0 auto
					display: inline-block
					width: 600px
					margin-top: 20px
					padding-right: 40px
					border-right: 1px dotted
					.block
						overflow: hidden
						label
							padding-top: 5px
							padding-left: 10px
							font-weight: bold
							display: inline-block
						input
							float: right
							width: 400px
							padding: 10px
						select
							float: right
							width: 410px
						textarea
							float: right
							width: 410px
						.hint
							float: right
							width: 420px
							padding: 0px
							margin: 0px
							color: #79808B
						.review
							margin: 10px
							font-weight: bold
							color: rgba(0, 0, 0, 0.8)
							ol
								margin-left: 10px
								margin-top: 0px
								li
									margin: 10px 0px
						margin: 10px 10px 10px 10px
						padding: 5px 5px 10px 5px
						background: #dddddd
						border: 0 none
						border-radius: 5px
					.reward
						border-bottom: 1px dotted
						margin-bottom: 15px
						margin-top: 10px
						padding-bottom: 10px
						position: relative
						h2
							font-size: 20px
							font-weight: bold
							margin: 15px 10px 15px 10px
							display: inline
						.remove_nested_fields
							float: right
							margin-right: 10px
							margin-top: 10px

				.template
					text-align: left
					display: inline-block
					position: absolute
					padding-left: 35px
					margin: 32px 40px 0px 20px
					.project-box
						overflow: hidden
						height: 400px
						box-shadow: 0 1px 4px darken(lightgray, 10%)
						position: relative
						margin: 0 20px 1.5em 0
						float: left
						width: 220px
						font-family: Helvetica Neue, Helvetica, Arial, sans-serif
						&:nth-child(3n+0)
							margin: 0 0 1.5em 0

						.status-flag
							position: absolute
						a
							text-decoration: none
						.wrapper
							position: relative
							.templateimage
								opacity: 1
								&:hover
								opacity: .9
								> .title a
									text-decoration: underline !important
						    .category
								height: 15px
								background-color: #dddddd
								width: 70%
								color: black
								text-align: center
								font-size: 12px
								position: absolute
								bottom: -3px
								left: 0
								right: 0
								padding-top: 4px
								margin-left: auto
								margin-right: auto
								margin-bottom: 3px
								border-top-left-radius: 2px
								border-top-right-radius: 2px
								color: $blue-two

						.name
							margin: .4em 0
							line-height: 1.1em
							a
								color: $blue-one
								font-weight: bold
								font-size: 0.95em
								&:hover
									text-decoration: underline !important

						.padding
							padding: .2em .8em

						.headline
							font-size: .8em
							margin: .8em 0 .4em 0
							line-height: 1.4em
							font-weight: 400
							height: 70px
							color: #79808b
							a
								color: $blue-two

						.status
							border-top: 1px solid rgba(0, 0, 0, 0.1)
							bottom: 0px
							position: absolute
							width: 100%
							background: #F8F8F8
							color: $blue-two
							span
								color: $blue-one

						.progress-bar
							#progress_wrapper, #progress
								height: .6em
								border-radius: 6px
								box-shadow: inset 0 0 4px lighten(gray, 15%)
							#progress
								background: $green-one

						.time-remaining, .money-raised, .percentage
							float: left
							padding: 1em 0
							text-transform: uppercase
							font-size: .6em
							color: $blue-two
							span
								display: block
								font-weight: bold
								font-size: 1.4em
								text-transform: none
								margin-bottom: .2em

						.time-remaining
							margin-left: 25px

						.money-raised
							float: right
							margin-right: 2%

			.title
				padding-top: 20px
				padding-bottom: 20px
				background: #dddddd
				text-align: center
				h2
					font-size: 28px !important
					border: none
					padding-top: 10px
					padding-bottom: 10px
				h3
					font-size: 18px !important
					border: none
					padding-top: 10px
					padding-bottom: 10px
		ul
			padding: 10px 10px 10px 10px
			background: black
			width: 100%
			z-index: 100
			li
				background: #00b22d
				border-radius: 3px
				margin: 20px 5px 5px 5px
				padding: 5px 5px 5px 5px
				display: inline
				color: white
				cursor: pointer


		
#page_content
  .container
  	.bootstrap-form
	    = nested_form_for @project, html: { id: 'project_form' } do |f|
	    	#bodyspacer style="display:none; height: 36px; width: 100%;"
	        ul#progressbar
	          li.first Basics
	          li.second Rewards
	          li.third Story
	          li.fourth Account
	          li.fifth Review
	        .fieldset
				.title
				  h2#h2 Meet your new project
				  h3#h3 Start by giving it a name, a pic, and other important details.
				.panel
					.inputs.first
						  .block
						      = f.label :permalink, t('formtastic.labels.project.permalink')
				              .input-prepend.permalink style="display: inline; float:right;"
				                span.add-on style="padding: 10px; margin-top: 0px" = "#{::Configuration[:base_url]}/".gsub!("http://","")
						      	= f.text_field :permalink, pattern: '^(\w|-)+$', style: "width:117px;"
							  .hint= "#{t('.permalink_hint')} #{t('.permalink_important')}"
						  .block
						      = f.label :name, t('formtastic.labels.project.name')
						      = f.text_field :name, { maxlength: 50, id: 'name-input' }
							  .hint= "#{t('formtastic.hints.project.name')} #{t('.name_important')}"
						  .block
						      = f.label :headline, t('formtastic.labels.project.headline')
						      = f.text_field :headline, { maxlength: 140, id: 'headline-input'}
							  .hint= "#{t('formtastic.hints.project.headline')} #{t('.headline_important')}"
						  .block
						      = f.label :category, t('.category')
						      = f.select :category_id, Category.array
						  .block
						      = f.label :goal, t('formtastic.labels.project.goal')
						      = f.text_field :goal, id: "goal-input"
							  .hint= "#{t('formtastic.hints.project.goal')} #{t('.important_html')}"
						  .block
							  = f.label :online_days, t('formtastic.labels.project.expires_at')
							  = f.text_field :online_days, id: 'days-input'
							  .hint= "#{t('formtastic.hints.project.online_days')} #{t('.online_days_important')}"
					.inputs.second style="display:none"
						  .bootstrap-twitter
							  = f.fields_for :rewards do |rewards|
							  	.reward
							  		h2 Reward
							  		= link_to "javascript:void(0)", class: 'btn btn-danger remove_nested_fields', data: {"association" => "rewards" } do
								  			i.icon-trash.icon-white
								  	.block
								  		= rewards.label :minimum_value, t('activerecord.attributes.reward.minimum_value')
								  	 	= rewards.text_field :minimum_value
								  	 	.hint= "#{t('formtastic.hints.reward.minimum_value')}"
								  	.block
								  	 	= rewards.label :description, t('activerecord.attributes.reward.description')
								  	 	= rewards.text_field :description
								  	 	.hint= "#{t('formtastic.hints.reward.description')}"
								  	.block
								  	 	= rewards.label :days_to_delivery, t('activerecord.attributes.reward.days_to_delivery')
								  	 	= rewards.text_field :days_to_delivery
								  	 	.hint= "#{t('formtastic.hints.reward.days_to_delivery')}"
							  = f.link_to_add "Add reward", :rewards, class: 'btn btn-success'
						  .dummy style="height:30px"
					.inputs.third style="display:none;"
						  .block
						      = f.label :video_url, t('formtastic.labels.project.video')
						      = f.text_field :video_url, data: { path: video_projects_path }, id: 'video-input'
							  .hint= "#{t('formtastic.hints.project.video_url')} #{t('.video_important')}".html_safe
						  .block
						      = f.label :about, t('formtastic.labels.project.about')
						      = f.text_area :about
							  .hint= "#{t('formtastic.hints.project.about')} #{t('.about_important')}"
					.inputs.fourth style="display:none;"
						  .block
						      = f.label :govid, t('formtastic.labels.project.identification')
						      = f.file_field :govid, as: :file
						      = f.hidden_field :govid_cache
							  .hint= "#{t('formtastic.hints.project.identification')}".html_safe
						  .block
						      = f.label :paypal, t('formtastic.labels.project.paypal')
						      = f.text_field :paypal
							  .hint= "#{t('formtastic.hints.project.paypal')}"
						  .dummy style="height: 100px"
					.inputs.fifth style="display:none;"
						  .block
						  	  .review
						  	  	= "#{t('formtastic.hints.project.review')}".html_safe
						  	  = f.label :accepted_terms, t('accept_terms_html', link: link_to(t('terms'), t('footer.links.terms_link'), target: :_blank)), class: 'inline'
						  	  = f.check_box :accepted_terms, style: "float: none; display: inline; ,margin: 5px"
			                  .bootstrap-twitter
			                    .send
						  	      = f.button t('.submit'), id: 'project_submit', class: 'btn btn-success btn_send', style: "margin: 5px"
					.template
						.project-box[itemscope itemtype="http://schema.org/CreativeWork" class=(custom_class if defined?(custom_class))]
						  meta[itemprop="dateCreated"]
						  .wrapper
						  	.templateimage style="height: 140px; width: 220px;"
						  	.category = "Architecture & Urbanism"
						  .padding
						    .name    = 'Name'
						    .headline  = 'Subtitle'
						  .status
						    .padding
						      .progress-bar = @project.progress_bar(dummy=true)
						      .percentage = t('channels.projects.progress_html', percent: '0')
						      .time-remaining
						      	= t('channels.projects.time_remaining_html', count: '0', unit: 'days')
						      .money-raised
						      	= t('channels.projects.pledged_html', value: number_to_currency(0, precision: 0))
	.clearfix
javascript:
	$(window).load(function(){
		$('.remove_nested_fields:first').hide();
		var index = index || 1;
		$("li.first").click(function(){
			if(index != 1) {
				$("body, html").scrollTop(86);
				$('.inputs, #h2, #h3').hide();
				$('#h2').text("#{t('.firstheader')}");
				$('#h3').text("#{t('.firstsubheader')}")
				$('.inputs.first, #h2, #h3').fadeIn(400);
				index = 1;
			}
		});
		$("li.second").click(function(){
			if(index != 2) {
				$("body, html").scrollTop(86);
				$('.inputs, #h2, #h3').hide();
				$('#h2').text("#{t('.secondheader')}");
				$('#h3').text("#{t('.secondsubheader')}")
				$('.inputs.second, #h2, #h3').fadeIn(400);
				index = 2;
			}
		});
		$("li.third").click(function(){
			if(index !=3) {
				$("body, html").scrollTop(86);
				$('.inputs, #h2, #h3').hide();
				$('#h2').text("#{t('.thirdheader')}");
				$('#h3').text("#{t('.thirdsubheader')}")
				$('.inputs.third, #h2, #h3').fadeIn(400);
				index = 3;
			}
		});
		$("li.fourth").click(function(){
			if(index !=4) {
				$("body, html").scrollTop(86);
				$('.inputs, #h2, #h3').hide();
				$('#h2').text("#{t('.fourthheader')}");
				$('#h3').text("#{t('.fourthsubheader')}")
				$('.inputs.fourth, #h2, #h3').fadeIn(400);
				index = 4;
			}
		});
		$("li.fifth").click(function(){
			if(index !=5) {
				$("body, html").scrollTop(86);
				$('.inputs, #h2, #h3').hide();
				$('#h2').text("#{t('.fifthheader')}");
				$('#h3').text("#{t('.fifthsubheader')}")
				$('.inputs.fifth, #h2, #h3').fadeIn(400);
				index = 5;
			}
		});

		$("#video-input").change(function(){
			var vimeoVideo = $('#video-input').val();
			var regExp = /^.+vimeo.com\/(.*\/)?([^#\?]*)/;
			var vimeoVideoID = vimeoVideo.match(regExp)[2]
			$.ajax({
			        type:'GET',
			        url: 'http://vimeo.com/api/v2/video/' + vimeoVideoID  + '.json',
			        jsonp: 'callback',
			        dataType: 'jsonp',
			        success: function(data){
			            debugger;
			           	  $('.templateimage').empty()
			              $('<img/>' ,{
			                 src:data[0].thumbnail_medium,
			                 width:'220',
			                 height:'140'
			              })
			              .appendTo('.templateimage');
			        }
			    });
		});
		$("#name-input").keyup(function(){
			$('.name').text($("#name-input").val());
			if (!$("#name-input").val()) {
				$('.name').text('Name');
			}
		});
		$("#headline-input").keyup(function(){
			$('.headline').text($("#headline-input").val());
			if (!$("#headline-input").val()) {
				$('.headline').text('Subtitle');
			}
		});
		$("#days-input").keyup(function(){
			$('.time-remaining').children('span').text($("#days-input").val() + ' days');
			if (!$("#days-input").val()) {
				$('.time-remaining').children('span').text('0 days');
			}
		});
		$("#project_category_id").change(function(){
			$('.category').text($("#project_category_id").find('option:selected').text());
		});
		$('#days-input, #goal-input').on('keypress', function(ev) {
		    var keyCode = window.event ? ev.keyCode : ev.which;
		    if (keyCode < 48 || keyCode > 57) {
		        if (keyCode != 0 && keyCode != 8 && keyCode != 13 && !ev.ctrlKey) {
		            ev.preventDefault();
		        }
		    }
		});
		$(window).scroll(function () {
		var height = $('ul#progressbar').offset().top;
		if($(window).scrollTop() >= 86) {
		$('#bodyspacer').css('display','block');
		$('ul#progressbar').css('top','0');
		$('ul#progressbar').css('position','fixed');
		} else {
		$('#bodyspacer').css('display','none');
		$('ul#progressbar').css('top','auto');
		$('ul#progressbar').css('position','static');		
		}
		});
	});